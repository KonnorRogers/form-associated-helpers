import{a as o}from"/form-associated-helpers/bridgetown/static/chunks/chunk-ZL6FUDOL.js";import{a as n}from"/form-associated-helpers/bridgetown/static/chunks/chunk-JWI5Q4SE.js";import{a as u}from"/form-associated-helpers/bridgetown/static/chunks/chunk-4QWIFJON.js";import{d as l}from"/form-associated-helpers/bridgetown/static/chunks/chunk-ENMDFKSV.js";function I(i){return class extends n(u(i)){constructor(...t){super(...t);l(this,"handleInvalid",t=>{t.target===this&&(this.disabled===!0||this.hasAttribute("disabled")||(this.value!==this.defaultValue&&(this.valueHasChanged=!0),this.hasInteracted=!0,h(this)))});l(this,"handleInteraction",t=>{this.disabled===!0||this.hasAttribute("disabled")||(!this.matches(":focus-within")&&this.valueHasChanged&&(this.hasInteracted=!0),this.runValidators())});this.role=null,this.value=null,this.previousValue=this.value,this.defaultValue="",this.name="",this.type=this.localName||"",this.disabled=!1,this.required=!1,this.hasInteracted=this.hasInteracted??!1,this.valueHasChanged=this.valueHasChanged??!1,this.validators=[],this.addEventListener("focusout",this.handleInteraction),this.addEventListener("blur",this.handleInteraction),this.addEventListener("invalid",this.handleInvalid)}static get observedAttributes(){let t=new Set(super.observedAttributes||[]);for(let a of this.validators)if(a.observedAttributes)for(let e of a.observedAttributes)t.add(e);return[...t]}static get validators(){return[o]}get allValidators(){let t=this.constructor.validators||[],a=this.validators||[];return[...t,...a]}get willShowValidationMessage(){return this.disabled!==!0&&this.hasInteracted===!0}get labels(){return this.internals.labels}get validity(){return this.internals.validity}get validationMessage(){return this.internals.validationMessage}get willValidate(){return this.internals.willValidate}setCustomValidity(t){if(this.setValidity({}),t){this.setValidity({customError:!0},t);return}}attributeChangedCallback(t,a,e){typeof super.attributeChangedCallback=="function"&&super.attributeChangedCallback(t,a,e),e!==a&&(t==="role"&&(this.internals.role=e||null),t==="value"&&(this.defaultValue=this.getAttribute("value")||"",!this.hasInteracted&&!this.valueHasChanged&&(this.value=this.defaultValue,this.setFormValue(this.value,this.value))),this.runValidators())}formResetCallback(){"formControl"in this&&this.formControl&&(this.formControl.value=this.defaultValue),this.setValidity({}),this.value=this.defaultValue,this.hasInteracted=!1,this.valueHasChanged=!1,this.runValidators(),this.setFormValue(this.defaultValue,this.defaultValue)}formDisabledCallback(t){this.disabled=t,this.setValidity({}),this.runValidators()}formStateRestoreCallback(t,a){this.value=t,this.setValidity({}),this.formControl&&(this.formControl.value=t)}setValidity(...t){let a=t[0],e=t[1],r=t[2];r||(r=this.validationTarget),this.internals.setValidity(a,e,r),h(this)}reportValidity(){return this.runValidators(),this.internals.reportValidity()}checkValidity(){return this.runValidators(),this.internals.checkValidity()}get validationTarget(){return this.formControl||void 0}setFormValue(...t){this.value!==this.defaultValue&&(this.valueHasChanged=!0),this.internals.setFormValue(...t)}get form(){return this.internals.form}runValidators(){let t=this;if(t.disabled||t.getAttribute("disabled")){t.setValidity({});return}let a=t.allValidators;if(!a){t.setValidity({});return}let e={customError:t.validity.customError},r=t.formControl||void 0,s="";for(let f of a){let{isValid:c,message:v,invalidKeys:d}=f.checkValidity(t);c||(s||(s=v),d?.length>=0&&d.forEach(V=>e[V]=!0))}s||(s=t.validationMessage),t.setValidity(e,s,r)}}}function h(i){if(i.disabled||i.hasAttribute("disabled")){i.deleteCustomState("invalid"),i.deleteCustomState("user-invalid"),i.deleteCustomState("valid"),i.deleteCustomState("user-valid");return}i.validity.valid?(i.deleteCustomState("invalid"),i.deleteCustomState("user-invalid"),i.addCustomState("valid"),i.toggleCustomState("user-valid",i.hasInteracted&&i.valueHasChanged)):(i.deleteCustomState("valid"),i.deleteCustomState("user-valid"),i.addCustomState("invalid"),i.toggleCustomState("user-invalid",i.hasInteracted&&i.valueHasChanged))}export{I as a};
//# sourceMappingURL=/form-associated-helpers/bridgetown/static/chunks/chunk-DXUBH6LX.js.map
